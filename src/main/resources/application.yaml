spring:
  application:
   name: springboot-observability-setup

  profiles:
    active: ${PROFILE:dev}

  #----------Virtual threads----------
  threads:
    virtual:
      enabled: false

  #----------JWT-based security----------
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: ${OAUTH2_ISSUER_URI}

#----------Observability----------
management:
  endpoints:
    web:
     exposure:
      include: health,info,prometheus

  metrics:
    tags:
      application: ${spring.application.name}
      env: ${spring.profiles.active:unknown}

  tracing:
    sampling:
     probability: 1   # optional 1%, defaults to 100%

  otlp:
    tracing:
     endpoint: ${TRACING_ENDPOINT:http://localhost:4318/v1/traces}


#----------Logging, see logback-spring.xml----------
logging:
  level:
    root: warn